{% extends 'base.html.twig' %}

{% block title %}{{ mode.name }}{% endblock %}

{% block body %}
    <h1 class="mt-3 mx-3">{{ mode.name }}</h1>

    <table class="table table-hover">
        <tbody>
            <tr class="table-active">
                <th scope="col">Id</th>
                <td>{{ mode.id }}</td>
            </tr>
            <tr class="table-active">
                <th scope="col">Name</th>
                <td>{{ mode.name }}</td>
            </tr>
            <tr class="table-active">
                <th scope="col">Statistiques</th>
                <td>{{ mode.jsonstats ? mode.jsonstats|json_encode : '' }}</td>
            </tr>
            <tr class="table-active">
                <th scope="col">Parties</th>
                <td>
                    {% if mode.games is not empty %}
                        {% for game in mode.games %}
                            <span class = "bold-text">{{ game.dm.login }}</span>
                            est le maître de jeu de la partie : <span class = "bold-text">{{game.name}}</span>
                            <a href="#"><i class="bi bi-pencil btn btn-sm btn-warning rounded"></i></a>
                            <a onclick="return confirm('Confirmer la suppression')" href="#"><i class="bi bi-trash btn btn-sm btn-danger rounded"></i></a>
                            <br>
                        {% endfor %}
                    {% else %}
                    Aucune partie associée à ce mode de jeu.
                    {% endif %}
                </td>
            </tr>

            
        </tbody>
    </table>

    <a href="{{ path('app_backoffice_mode_list') }}" class="btn btn-sm btn-outline-info mx-3">Retour à la liste</a>

    <a href="{{ path('app_backoffice_mode_edit', {'id': mode.id}) }}" class="btn btn-sm btn-outline-warning mx-3">Modifier</a>
    <form method="post" action="" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer ce mode de jeu ?');">
        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ mode.id) }}">
        <button class="btn btn-sm btn-outline-danger mx-3 mt-2">Supprimer</button>
    </form>
{% endblock %}